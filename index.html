<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webåˆ¶ä½œãƒ’ãƒ¤ãƒªãƒ³ã‚°ã‚·ãƒ¼ãƒˆ | Design Partner</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Noto Sans JP"', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                        },
                        accent: {
                            500: '#f59e0b', // Amber for emphasis
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            -webkit-font-smoothing: antialiased;
        }
        /* Custom Scrollbar for textareas */
        textarea::-webkit-scrollbar {
            width: 8px;
        }
        textarea::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        textarea::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 4px;
        }
        .fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .step-transition {
            transition: all 0.3s ease-in-out;
        }
        
        /* Toast Animation */
        #toast {
            visibility: hidden;
            opacity: 0;
            transition: visibility 0s, opacity 0.5s linear;
        }
        #toast.show {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 dark:bg-gray-900 dark:text-gray-100 transition-colors duration-300 min-h-screen flex flex-col">

    <!-- Header -->
    <header class="sticky top-0 z-50 bg-white/90 dark:bg-gray-800/90 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 shadow-sm">
        <div class="max-w-3xl mx-auto px-4 h-16 flex items-center justify-between">
            <h1 class="font-bold text-lg text-primary-600 dark:text-primary-400 flex items-center">
                <i class="fa-solid fa-pen-nib mr-2"></i>
                <span class="hidden sm:inline">Webåˆ¶ä½œãƒ’ãƒ¤ãƒªãƒ³ã‚°</span>
                <span class="sm:hidden">ãƒ’ãƒ¤ãƒªãƒ³ã‚°</span>
            </h1>
            
            <div class="flex items-center gap-2">
                <!-- Help Button -->
                <button onclick="toggleModal('helpModal')" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400 transition" title="ä½¿ã„æ–¹">
                    <i class="fa-regular fa-circle-question text-xl"></i>
                </button>
                
                <!-- Settings Button -->
                <div class="relative">
                    <button onclick="toggleDropdown('settingsDropdown')" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400 transition" title="è¨­å®š">
                        <i class="fa-solid fa-gear text-xl"></i>
                    </button>
                    
                    <!-- Settings Dropdown -->
                    <div id="settingsDropdown" class="hidden absolute right-0 mt-2 w-64 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 z-50 overflow-hidden transform origin-top-right transition-all">
                        <div class="p-4 border-b border-gray-200 dark:border-gray-700">
                            <h3 class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3">è¡¨ç¤ºè¨­å®š</h3>
                            <button id="themeToggleBtn" class="w-full flex items-center justify-between p-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition">
                                <span class="text-sm font-medium"><i class="fa-solid fa-moon dark:hidden mr-2"></i><i class="fa-solid fa-sun hidden dark:inline mr-2"></i>ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿</span>
                                <span class="text-xs bg-white dark:bg-gray-600 px-2 py-1 rounded shadow-sm">Dark/Light</span>
                            </button>
                        </div>
                        <div class="p-4 bg-gray-50 dark:bg-gray-800/50">
                            <h3 class="text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3">ãƒ‡ãƒ¢æ©Ÿèƒ½</h3>
                            <button onclick="confirmDemoData()" class="w-full text-left text-sm text-primary-600 dark:text-primary-400 hover:underline mb-3 flex items-center">
                                <i class="fa-solid fa-magic-wand-sparkles mr-2"></i>ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›
                            </button>
                            <button onclick="confirmClearData()" class="w-full text-left text-xs text-gray-400 hover:text-red-500 hover:underline transition flex items-center">
                                <i class="fa-regular fa-trash-can mr-2"></i>ãƒ‡ãƒ¼ã‚¿ã‚’å…¨ã¦å‰Šé™¤
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Progress Bar -->
        <div class="w-full bg-gray-200 dark:bg-gray-700 h-1">
            <div id="progressBar" class="bg-primary-500 h-1 transition-all duration-500 ease-out" style="width: 0%"></div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow container max-w-2xl mx-auto px-4 py-8 pb-40 relative">
        <form id="hearingForm" onsubmit="return false;">
            <!-- Dynamic Content Area -->
            <div id="stepContainer" class="min-h-[60vh]">
                <!-- Steps will be injected here by JS -->
            </div>
        </form>
    </main>

    <!-- Footer / Navigation -->
    <footer class="fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4 z-40">
        <div class="max-w-2xl mx-auto">
            <div class="flex justify-between gap-4 mb-2">
                <button id="prevBtn" onclick="prevStep()" class="px-6 py-3 rounded-xl border border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-300 font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition hidden">
                    æˆ»ã‚‹
                </button>
                <button id="nextBtn" onclick="nextStep()" class="flex-1 px-6 py-3 rounded-xl bg-primary-600 hover:bg-primary-700 text-white font-bold shadow-lg shadow-primary-500/30 transition transform active:scale-95 flex items-center justify-center">
                    <span>æ¬¡ã¸é€²ã‚€</span>
                    <i class="fa-solid fa-arrow-right ml-2"></i>
                </button>
            </div>
            <div class="text-center text-[10px] text-gray-400 dark:text-gray-500 font-medium">
                ãƒ†ã‚¹ãƒˆç‰ˆï¼ˆãƒ™ãƒ¼ã‚¿ç‰ˆï¼‰ Â© 2026 SPC
            </div>
        </div>
    </footer>

    <!-- Help Modal -->
    <div id="helpModal" class="hidden fixed inset-0 z-[60] flex items-center justify-center px-4">
        <div class="absolute inset-0 bg-black/50 backdrop-blur-sm" onclick="toggleModal('helpModal')"></div>
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-lg relative overflow-hidden transform transition-all">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-bold text-gray-900 dark:text-white"><i class="fa-regular fa-circle-question mr-2 text-primary-500"></i>ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰</h2>
                    <button onclick="toggleModal('helpModal')" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200">
                        <i class="fa-solid fa-xmark text-xl"></i>
                    </button>
                </div>
                <div class="prose dark:prose-invert text-sm text-gray-600 dark:text-gray-300 space-y-4">
                    <p>
                        Webåˆ¶ä½œã®è¦ä»¶å®šç¾©ï¼ˆãƒ’ãƒ¤ãƒªãƒ³ã‚°ï¼‰ã‚’ã‚¹ãƒ ãƒ¼ã‚ºã«è¡Œã†ãŸã‚ã®ã‚¢ãƒ—ãƒªã§ã™ã€‚<br>
                        ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ä¸€ç·’ã«ç”»é¢ã‚’è¦‹ãªãŒã‚‰å…¥åŠ›ã™ã‚‹ã‹ã€ã”è‡ªèº«ã§è¦ä»¶ã‚’æ•´ç†ã™ã‚‹éš›ã«ãŠä½¿ã„ãã ã•ã„ã€‚
                    </p>
                    <div class="bg-primary-50 dark:bg-primary-900/20 p-4 rounded-xl">
                        <h3 class="font-bold text-primary-700 dark:text-primary-300 mb-2">ğŸ’¡ ä¾¿åˆ©ãªæ©Ÿèƒ½</h3>
                        <ul class="list-disc list-inside space-y-1">
                            <li><strong>è‡ªå‹•ä¿å­˜:</strong> å…¥åŠ›å†…å®¹ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã«è‡ªå‹•ä¿å­˜ã•ã‚Œã¾ã™ã€‚</li>
                            <li><strong>æ§‹æˆæ¡ˆä½œæˆ:</strong> LPã‹è¤‡æ•°ãƒšãƒ¼ã‚¸ã‹ã«ã‚ˆã£ã¦ã€æœ€é©ãªè³ªå•ã«åˆ‡ã‚Šæ›¿ã‚ã‚Šã¾ã™ã€‚</li>
                            <li><strong>AIã‚³ãƒ¼ãƒ‰ç”Ÿæˆ:</strong> å®Œäº†ç”»é¢ã‹ã‚‰ã€ŒAIé–‹ç™ºç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ã‚’ã‚³ãƒ”ãƒ¼ã—ã€ChatGPTãªã©ã«è²¼ã‚Œã°ã€ã™ãã«ã‚µã‚¤ãƒˆåˆ¶ä½œã‚’å§‹ã‚ã‚‰ã‚Œã¾ã™ã€‚</li>
                        </ul>
                    </div>
                </div>
                <div class="mt-6 text-right">
                    <button onclick="toggleModal('helpModal')" class="px-5 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition">
                        é–‰ã˜ã‚‹
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal (Generic) -->
    <div id="confirmModal" class="hidden fixed inset-0 z-[70] flex items-center justify-center px-4">
        <div class="absolute inset-0 bg-black/50 backdrop-blur-sm" onclick="closeConfirmModal()"></div>
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-sm relative p-6 transform transition-all">
            <h3 id="confirmTitle" class="text-lg font-bold text-gray-900 dark:text-white mb-2">ç¢ºèª</h3>
            <p id="confirmMessage" class="text-sm text-gray-600 dark:text-gray-300 mb-6">æœ¬å½“ã«å®Ÿè¡Œã—ã¾ã™ã‹ï¼Ÿ</p>
            <div class="flex gap-3 justify-end">
                <button onclick="closeConfirmModal()" class="px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition text-sm">
                    ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                </button>
                <button id="confirmOkBtn" class="px-4 py-2 rounded-lg bg-primary-600 text-white font-bold hover:bg-primary-700 transition text-sm shadow-lg shadow-primary-500/30">
                    OK
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-gray-900/90 dark:bg-white/90 text-white dark:text-gray-900 px-6 py-3 rounded-full shadow-xl z-[80] text-sm font-medium flex items-center gap-2">
        <i class="fa-solid fa-circle-check text-green-400 dark:text-green-500"></i>
        <span id="toastMessage">å®Œäº†ã—ã¾ã—ãŸ</span>
    </div>

    <!-- JavaScript Logic -->
    <script>
        // --- State Management ---
        const totalSteps = 10; // 0 to 9
        let currentStep = 0;
        
        // Form Data Store
        let formData = {
            interviewer: { company: '', name: '' }, 
            siteType: 'lp', 
            basicInfo: {},
            purpose: {},
            target: {},
            design: { keywords: [], color: '#3b82f6' },
            specs: { features: [] },
            seo: {},
            assets: {},
            extra: '',
            structure: {} 
        };

        // --- Step Renderers ---
        const renderers = {
            0: renderStep0, 
            1: renderStep1, 
            2: renderStep2, 
            3: renderStep3, 
            4: renderStep4, 
            5: renderStep5, 
            6: renderStep6, 
            7: renderStep7, 
            8: renderStep8, 
            9: renderStep9, 
            10: renderSummary 
        };

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            loadState();
            renderStep();
            setupSettings();
            
            // Close dropdowns when clicking outside
            document.addEventListener('click', (e) => {
                const dropdown = document.getElementById('settingsDropdown');
                const btn = e.target.closest('button[onclick^="toggleDropdown"]');
                if (!btn && !dropdown.contains(e.target) && !dropdown.classList.contains('hidden')) {
                    dropdown.classList.add('hidden');
                }
            });
        });

        function setupSettings() {
            const themeBtn = document.getElementById('themeToggleBtn');
            
            // Initial Theme Check
            if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
            }

            themeBtn.addEventListener('click', () => {
                document.documentElement.classList.toggle('dark');
                const isDark = document.documentElement.classList.contains('dark');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
            });
        }

        // --- UI Interaction ---
        function toggleModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.toggle('hidden');
        }

        function toggleDropdown(id) {
            const el = document.getElementById(id);
            el.classList.toggle('hidden');
        }

        // Custom Confirm Modal Logic
        let confirmCallback = null;

        function showConfirm(message, callback) {
            document.getElementById('confirmMessage').innerHTML = message;
            confirmCallback = callback;
            document.getElementById('confirmModal').classList.remove('hidden');
        }

        function closeConfirmModal() {
            document.getElementById('confirmModal').classList.add('hidden');
            confirmCallback = null;
        }

        document.getElementById('confirmOkBtn').addEventListener('click', () => {
            if (confirmCallback) confirmCallback();
            closeConfirmModal();
        });

        // Toast Notification Logic
        function showToast(msg) {
            const toast = document.getElementById('toast');
            document.getElementById('toastMessage').innerText = msg;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // --- Navigation Logic ---
        function nextStep() {
            if (!validateCurrentStep()) return;
            saveCurrentStepData();
            
            if (currentStep < totalSteps) {
                currentStep++;
                renderStep();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                renderStep();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function renderStep() {
            const container = document.getElementById('stepContainer');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const progressBar = document.getElementById('progressBar');

            // Update Progress Bar
            const progress = (currentStep / totalSteps) * 100;
            progressBar.style.width = `${progress}%`;

            // Button Visibility
            if (currentStep === 0) {
                prevBtn.classList.add('hidden');
            } else {
                prevBtn.classList.remove('hidden');
            }

            if (currentStep === totalSteps) {
                // Summary Page
                nextBtn.classList.add('hidden');
                prevBtn.innerHTML = "ä¿®æ­£ã™ã‚‹";
            } else {
                nextBtn.classList.remove('hidden');
                nextBtn.innerHTML = currentStep === totalSteps - 1 ? 
                    `<span>å®Œäº†ã—ã¦å†…å®¹ã‚’ç¢ºèª</span><i class="fa-solid fa-check ml-2"></i>` : 
                    `<span>æ¬¡ã¸é€²ã‚€</span><i class="fa-solid fa-arrow-right ml-2"></i>`;
                prevBtn.innerHTML = "æˆ»ã‚‹";
            }

            // Render Content
            container.innerHTML = `<div class="fade-in">${renderers[currentStep]()}</div>`;
            
            // Re-attach listeners
            attachDynamicListeners();
        }

        function attachDynamicListeners() {
            const colorInput = document.getElementById('mainColor');
            if (colorInput) {
                colorInput.addEventListener('input', (e) => {
                    document.getElementById('colorPreview').style.backgroundColor = e.target.value;
                    document.getElementById('colorCode').innerText = e.target.value;
                });
            }
        }

        function validateCurrentStep() {
            if (currentStep === 0 && !formData.siteType) {
                showToast("ä½œæˆã—ãŸã„ã‚µã‚¤ãƒˆã®ã‚¿ã‚¤ãƒ—ã‚’é¸ã‚“ã§ãã ã•ã„");
                return false;
            }
            if (currentStep === 1) {
                 const name = document.getElementById('companyName').value;
                 if(!name) {
                     showToast("ä¼šç¤¾åã¾ãŸã¯å±‹å·ã¯å¿…é ˆã§ã™");
                     return false;
                 }
            }
            return true;
        }

        function saveCurrentStepData() {
            switch(currentStep) {
                case 0:
                    const typeInputs = document.getElementsByName('siteType');
                    for(let r of typeInputs) { if(r.checked) formData.siteType = r.value; }
                    break;
                case 1:
                    formData.interviewer = {
                        company: document.getElementById('interviewerCompany').value,
                        name: document.getElementById('interviewerName').value
                    };
                    formData.basicInfo = {
                        name: document.getElementById('companyName').value,
                        pic: document.getElementById('picName').value,
                        email: document.getElementById('email').value,
                        phone: document.getElementById('phone').value,
                        address: document.getElementById('address').value,
                        hours: document.getElementById('hours').value,
                        siteName: document.getElementById('siteName').value,
                        status: document.getElementById('projectStatus').value
                    };
                    break;
                case 2:
                    formData.purpose = {
                        objective: document.getElementById('objective').value,
                        business: document.getElementById('business').value,
                        goal: document.getElementById('goal').value,
                        kpi: document.getElementById('kpi').value,
                        issues: document.getElementById('issues').value
                    };
                    break;
                case 3:
                    formData.target = {
                        persona: document.getElementById('persona').value,
                        competitors: document.getElementById('competitors').value,
                        reference: document.getElementById('reference').value
                    };
                    break;
                case 4:
                    const keywords = [];
                    document.querySelectorAll('input[name="designKeyword"]:checked').forEach(cb => keywords.push(cb.value));
                    formData.design = {
                        keywords: keywords,
                        color: document.getElementById('mainColor').value,
                        font: document.getElementById('fontSpec').value
                    };
                    break;
                case 5:
                    const features = [];
                    document.querySelectorAll('input[name="features"]:checked').forEach(cb => features.push(cb.value));
                    formData.specs = {
                        devices: "PC / ã‚¹ãƒãƒ›ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–",
                        cms: document.getElementById('cms').value,
                        features: features,
                        other: document.getElementById('otherFeatures').value
                    };
                    break;
                case 6:
                    formData.seo = {
                        keywords: document.getElementById('seoKeywords').value,
                        exclude: document.getElementById('seoExclude').value,
                        tools: document.getElementById('analytics').value
                    };
                    break;
                case 7:
                    formData.assets = {
                        logo: getRadioValue('assetLogo'),
                        photo: getRadioValue('assetPhoto'),
                        text: getRadioValue('assetText'),
                        deadline: document.getElementById('deadline').value
                    };
                    break;
                case 8:
                    formData.extra = document.getElementById('freeText').value;
                    break;
                case 9:
                    if (formData.siteType === 'lp') {
                        formData.structure = {
                            lpMessage: document.getElementById('lpMessage').value,
                            lpAnxiety: document.getElementById('lpAnxiety').value,
                            lpSolution: document.getElementById('lpSolution').value,
                            lpCta: document.getElementById('lpCta').value
                        };
                    } else {
                        const pages = [];
                        document.querySelectorAll('input[name="pages"]:checked').forEach(cb => pages.push(cb.value));
                        formData.structure = {
                            pages: pages,
                            priorityPage: document.getElementById('priorityPage').value
                        };
                    }
                    break;
            }
            saveState(); 
        }

        // --- Demo Data & Clear Data with Custom Modal ---
        function confirmDemoData() {
            showConfirm("ç¾åœ¨ã®å…¥åŠ›å†…å®¹ã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚<br>ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã—ã¾ã™ã‹ï¼Ÿ", () => {
                generateDemoDataLogic();
            });
        }

        function generateDemoDataLogic() {
            formData = {
                interviewer: { company: 'æ ªå¼ä¼šç¤¾ã‚¦ã‚§ãƒ–ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼', name: 'å±±ç”° å¤ªéƒ' },
                siteType: 'lp',
                basicInfo: {
                    name: 'æ ªå¼ä¼šç¤¾ã‚µãƒ³ãƒ—ãƒ«ãƒ†ãƒƒã‚¯',
                    pic: 'éˆ´æœ¨ ä¸€éƒ',
                    email: 'info@sample-tech.co.jp',
                    phone: '03-1234-5678',
                    address: 'æ±äº¬éƒ½æ¸‹è°·åŒº...',
                    hours: 'å¹³æ—¥10:00-19:00',
                    siteName: 'SampleTech Official',
                    status: 'ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«'
                },
                purpose: {
                    objective: 'æ–°å•†å“ã®èªçŸ¥æ‹¡å¤§ã¨ã‚ªãƒ³ãƒ©ã‚¤ãƒ³è²©å£²ã®å¼·åŒ–',
                    business: 'AIã‚’æ´»ç”¨ã—ãŸæ¥­å‹™åŠ¹ç‡åŒ–ãƒ„ãƒ¼ãƒ«ã®é–‹ç™ºãƒ»è²©å£²',
                    goal: 'ãŠå•ã„åˆã‚ã›',
                    kpi: 'æœˆé–“ãƒªãƒ¼ãƒ‰ç²å¾—æ•°50ä»¶',
                    issues: 'è£½å“ã®é­…åŠ›ãŒä¼ã‚ã‚Šãã£ã¦ãŠã‚‰ãšã€é›¢è„±ãŒå¤šã„'
                },
                target: {
                    persona: 'ä¸­å°ä¼æ¥­ã®DXæ¨é€²æ‹…å½“è€…ã€30-40ä»£ç”·æ€§',
                    competitors: 'ç«¶åˆAç¤¾ã€Bãƒ„ãƒ¼ãƒ«',
                    reference: 'https://example.com (ã“ã®ã‚µã‚¤ãƒˆã®æ¸…æ½”æ„ŸãŒå¥½ã)'
                },
                design: {
                    keywords: ['ä¿¡é ¼æ„Ÿ', 'çŸ¥çš„', 'ã‚·ãƒ³ãƒ—ãƒ«'],
                    color: '#2563eb',
                    font: 'Noto Sans JP'
                },
                specs: {
                    devices: "PC / ã‚¹ãƒãƒ›ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–",
                    cms: 'WordPress',
                    features: ['ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ', 'ãŠçŸ¥ã‚‰ã›æ©Ÿèƒ½'],
                    other: 'èª­ã¿è¾¼ã¿é€Ÿåº¦ã‚’é‡è¦–ã—ãŸã„'
                },
                seo: {
                    keywords: 'æ¥­å‹™åŠ¹ç‡åŒ– AI, DXãƒ„ãƒ¼ãƒ« ä¸­å°ä¼æ¥­',
                    exclude: 'å®‰å£²ã‚Šã€æ ¼å®‰',
                    tools: 'GA4å°å…¥å¸Œæœ›'
                },
                assets: {
                    logo: 'ã‚ã‚Š',
                    photo: 'ä¾é ¼ã—ãŸã„',
                    text: 'ã‚ã‚Š',
                    deadline: '3ãƒ¶æœˆä»¥å†…'
                },
                extra: 'å°‚é–€ç”¨èªã‚’ãªã‚‹ã¹ãä½¿ã‚ãšã€åˆ†ã‹ã‚Šã‚„ã™ã„è¨€è‘‰ã§èª¬æ˜ã—ãŸã„ã€‚',
                structure: {
                    lpMessage: 'AIã§æ¥­å‹™æ™‚é–“ã‚’50%å‰Šæ¸›',
                    lpAnxiety: 'å°å…¥ãŒé›£ã—ãã†ã€ã‚³ã‚¹ãƒˆãŒé«˜ã„',
                    lpSolution: 'å°‚ä»»ã‚µãƒãƒ¼ãƒˆã‚ã‚Šã€æœˆé¡980å††ã‹ã‚‰',
                    lpCta: 'ç„¡æ–™ãƒˆãƒ©ã‚¤ã‚¢ãƒ«ã«ç”³ã—è¾¼ã‚€'
                }
            };
            
            saveState();
            currentStep = 0;
            renderStep();
            document.getElementById('settingsDropdown').classList.add('hidden');
            showToast("ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã—ã¾ã—ãŸ");
        }

        function confirmClearData() {
            showConfirm("æœ¬å½“ã«å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’å…¨ã¦å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ<br>ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚", () => {
                clearDataLogic();
            });
        }

        function clearDataLogic() {
             localStorage.removeItem('hearingFormData');
             // Reset to defaults
             formData = {
                interviewer: { company: '', name: '' },
                siteType: 'lp',
                basicInfo: {},
                purpose: {},
                target: {},
                design: { keywords: [], color: '#3b82f6' },
                specs: { features: [] },
                seo: {},
                assets: {},
                extra: '',
                structure: {}
            };
            currentStep = 0;
            renderStep();
            document.getElementById('settingsDropdown').classList.add('hidden');
            showToast("ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã—ãŸ");
        }

        // --- Helpers ---
        function getRadioValue(name) {
            const els = document.getElementsByName(name);
            for (let el of els) { if (el.checked) return el.value; }
            return '';
        }

        function saveState() {
            localStorage.setItem('hearingFormData', JSON.stringify(formData));
        }

        function loadState() {
            const saved = localStorage.getItem('hearingFormData');
            if (saved) {
                formData = JSON.parse(saved);
                if (!formData.interviewer) formData.interviewer = { company: '', name: '' };
            }
        }

        // --- Rendering Functions (HTML Generators) ---

        function renderHeader(title, subtitle) {
            return `
                <div class="mb-6">
                    <span class="text-xs font-bold tracking-widest text-primary-600 dark:text-primary-400 uppercase">STEP ${currentStep}</span>
                    <h2 class="text-2xl font-bold text-gray-900 dark:text-white mt-1">${title}</h2>
                    <p class="text-gray-500 dark:text-gray-400 mt-2 text-sm">${subtitle}</p>
                </div>
            `;
        }

        function renderStep0() {
            const isLp = formData.siteType === 'lp';
            return `
                ${renderHeader("ä½œã‚ŠãŸã„ã‚µã‚¤ãƒˆã®ã‚¿ã‚¤ãƒ—ã¯ï¼Ÿ", "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ–¹å‘æ€§ã‚’æ±ºã‚ã‚‹ä¸€ç•ªå¤§åˆ‡ãªè³ªå•ã§ã™ã€‚")}
                <div class="grid gap-4 md:grid-cols-2 mt-8">
                    <label class="cursor-pointer relative group">
                        <input type="radio" name="siteType" value="lp" class="peer sr-only" ${isLp ? 'checked' : ''}>
                        <div class="p-6 rounded-2xl border-2 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:border-primary-400 peer-checked:border-primary-600 peer-checked:bg-primary-50 dark:peer-checked:bg-primary-900/20 transition-all h-full">
                            <div class="text-4xl text-primary-500 mb-4"><i class="fa-solid fa-scroll"></i></div>
                            <h3 class="font-bold text-lg mb-2">ã‚·ãƒ³ã‚°ãƒ«ãƒšãƒ¼ã‚¸ (LP)</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-300 leading-relaxed">
                                ç¸¦é•·ã®1ãƒšãƒ¼ã‚¸å®Œçµå‹ã€‚<br>
                                å•†å“ã‚„ã‚µãƒ¼ãƒ“ã‚¹ã®é­…åŠ›ã‚’ä¸€ç‚¹é›†ä¸­ã§ä¼ãˆã€ç”³ã—è¾¼ã¿ã‚„è³¼å…¥ã«ç¹‹ã’ã‚‹ã®ã«æœ€é©ã§ã™ã€‚
                            </p>
                            <div class="absolute top-4 right-4 text-primary-600 opacity-0 peer-checked:opacity-100 transition">
                                <i class="fa-solid fa-circle-check text-2xl"></i>
                            </div>
                        </div>
                    </label>

                    <label class="cursor-pointer relative group">
                        <input type="radio" name="siteType" value="corp" class="peer sr-only" ${!isLp ? 'checked' : ''}>
                        <div class="p-6 rounded-2xl border-2 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:border-primary-400 peer-checked:border-primary-600 peer-checked:bg-primary-50 dark:peer-checked:bg-primary-900/20 transition-all h-full">
                            <div class="text-4xl text-blue-500 mb-4"><i class="fa-solid fa-sitemap"></i></div>
                            <h3 class="font-bold text-lg mb-2">ã‚³ãƒ¼ãƒãƒ¬ãƒ¼ãƒˆã‚µã‚¤ãƒˆ</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-300 leading-relaxed">
                                ä¼šç¤¾æ¦‚è¦ã€ã‚µãƒ¼ãƒ“ã‚¹ã€å®Ÿç¸¾ãªã©è¤‡æ•°ãƒšãƒ¼ã‚¸ã§æ§‹æˆã€‚<br>
                                ä¿¡é ¼æ„Ÿã‚’é†¸æˆã—ã€æƒ…å ±ã‚’ä½“ç³»çš„ã«ä¼ãˆãŸã„å ´åˆã«é©ã—ã¦ã„ã¾ã™ã€‚
                            </p>
                            <div class="absolute top-4 right-4 text-primary-600 opacity-0 peer-checked:opacity-100 transition">
                                <i class="fa-solid fa-circle-check text-2xl"></i>
                            </div>
                        </div>
                    </label>
                </div>
            `;
        }

        function renderStep1() {
            return `
                ${renderHeader("åŸºæœ¬æƒ…å ±ã‚’æ•™ãˆã¦ãã ã•ã„", "ãƒ’ãƒ¤ãƒªãƒ³ã‚°æ‹…å½“è€…ï¼ˆåˆ¶ä½œå´ï¼‰ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ§˜ã®æƒ…å ±ã‚’å…¥åŠ›ã—ã¾ã™ã€‚")}
                
                <!-- ãƒ’ãƒ¤ãƒªãƒ³ã‚°æ‹…å½“è€…æƒ…å ± -->
                <div class="mb-8 p-4 bg-primary-50 dark:bg-primary-900/20 rounded-xl border border-primary-100 dark:border-primary-800/50">
                    <h3 class="text-sm font-bold text-primary-700 dark:text-primary-300 mb-3"><i class="fa-solid fa-user-tie mr-2"></i>ãƒ’ãƒ¤ãƒªãƒ³ã‚°å®Ÿæ–½è€…ï¼ˆåˆ¶ä½œå´ï¼‰</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-medium mb-1 text-gray-500 dark:text-gray-400">åˆ¶ä½œä¼šç¤¾å</label>
                            <input type="text" id="interviewerCompany" value="${formData.interviewer?.company || ''}" class="w-full p-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm focus:ring-2 focus:ring-primary-500 outline-none transition" placeholder="è‡ªç¤¾åã‚’å…¥åŠ›">
                        </div>
                        <div>
                            <label class="block text-xs font-medium mb-1 text-gray-500 dark:text-gray-400">æ‹…å½“è€…å</label>
                            <input type="text" id="interviewerName" value="${formData.interviewer?.name || ''}" class="w-full p-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-sm focus:ring-2 focus:ring-primary-500 outline-none transition" placeholder="ã‚ãªãŸã®åå‰">
                        </div>
                    </div>
                </div>

                <div class="space-y-4">
                    <h3 class="text-sm font-bold text-gray-700 dark:text-gray-300 border-b pb-2 border-gray-200 dark:border-gray-700">ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ§˜æƒ…å ±</h3>
                    <div>
                        <label class="block text-sm font-medium mb-1">ä¼šç¤¾å / å±‹å· <span class="text-red-500">*</span></label>
                        <input type="text" id="companyName" value="${formData.basicInfo.name || ''}" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 outline-none transition" placeholder="ä¾‹ï¼šæ ªå¼ä¼šç¤¾ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">ã”æ‹…å½“è€…å</label>
                        <input type="text" id="picName" value="${formData.basicInfo.pic || ''}" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 outline-none transition">
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium mb-1">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                            <input type="email" id="email" value="${formData.basicInfo.email || ''}" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 outline-none transition">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-1">é›»è©±ç•ªå·</label>
                            <input type="tel" id="phone" value="${formData.basicInfo.phone || ''}" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 outline-none transition">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">ä½æ‰€</label>
                        <input type="text" id="address" value="${formData.basicInfo.address || ''}" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 outline-none transition">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">å–¶æ¥­æ™‚é–“ / å®šä¼‘æ—¥</label>
                        <input type="text" id="hours" value="${formData.basicInfo.hours || ''}" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 outline-none transition" placeholder="ä¾‹ï¼šå¹³æ—¥10:00-18:00 / åœŸæ—¥ç¥ä¼‘ã¿">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">ã‚µã‚¤ãƒˆå (æ±ºã¾ã£ã¦ã„ã‚Œã°)</label>
                        <input type="text" id="siteName" value="${formData.basicInfo.siteName || ''}" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 outline-none transition">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">åˆ¶ä½œç¨®åˆ¥</label>
                        <select id="projectStatus" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 outline-none transition">
                            <option value="æ–°è¦åˆ¶ä½œ" ${formData.basicInfo.status === 'æ–°è¦åˆ¶ä½œ' ? 'selected' : ''}>æ–°è¦åˆ¶ä½œ</option>
                            <option value="ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«" ${formData.basicInfo.status === 'ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«' ? 'selected' : ''}>ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«</option>
                            <option value="éƒ¨åˆ†æ”¹ä¿®" ${formData.basicInfo.status === 'éƒ¨åˆ†æ”¹ä¿®' ? 'selected' : ''}>éƒ¨åˆ†æ”¹ä¿®</option>
                        </select>
                    </div>
                </div>
            `;
        }

        function renderStep2() {
            return `
                ${renderHeader("ç›®çš„ã¨ã‚´ãƒ¼ãƒ«", "Webã‚µã‚¤ãƒˆã‚’é€šã˜ã¦é”æˆã—ãŸã„ã“ã¨ã¯ä½•ã§ã™ã‹ï¼Ÿ")}
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-1">Webã‚µã‚¤ãƒˆã‚’ä½œã‚‹ç›®çš„</label>
                        <textarea id="objective" rows="2" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 outline-none transition" placeholder="ä¾‹ï¼šååˆºä»£ã‚ã‚Šã«ä¿¡é ¼ã§ãã‚‹æƒ…å ±æºã‚’ä½œã‚ŠãŸã„">${formData.purpose.objective || ''}</textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">äº‹æ¥­å†…å®¹ / ãƒ“ã‚¸ãƒã‚¹ãƒ¢ãƒ‡ãƒ«</label>
                        <textarea id="business" rows="2" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 outline-none transition" placeholder="èª°ã«ãƒ»ä½•ã‚’ãƒ»ã©ã®ã‚ˆã†ã«æä¾›ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ">${formData.purpose.business || ''}</textarea>
                    </div>
                     <div>
                        <label class="block text-sm font-medium mb-1">ã‚µã‚¤ãƒˆã®ã‚´ãƒ¼ãƒ« (CV)</label>
                        <select id="goal" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 outline-none transition">
                            <option value="ãŠå•ã„åˆã‚ã›" ${formData.purpose.goal === 'ãŠå•ã„åˆã‚ã›' ? 'selected' : ''}>ãŠå•ã„åˆã‚ã›ç²å¾—</option>
                            <option value="è³‡æ–™è«‹æ±‚" ${formData.purpose.goal === 'è³‡æ–™è«‹æ±‚' ? 'selected' : ''}>è³‡æ–™è«‹æ±‚</option>
                            <option value="è³¼å…¥ãƒ»äºˆç´„" ${formData.purpose.goal === 'è³¼å…¥ãƒ»äºˆç´„' ? 'selected' : ''}>å•†å“è³¼å…¥ãƒ»æ¥åº—äºˆç´„</option>
                            <option value="æ¡ç”¨å¿œå‹Ÿ" ${formData.purpose.goal === 'æ¡ç”¨å¿œå‹Ÿ' ? 'selected' : ''}>æ¡ç”¨å¿œå‹Ÿ</option>
                            <option value="èªçŸ¥æ‹¡å¤§" ${formData.purpose.goal === 'èªçŸ¥æ‹¡å¤§' ? 'selected' : ''}>èªçŸ¥æ‹¡å¤§ãƒ»ãƒ–ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">ç›®æ¨™æ•°å€¤ (KPI) / ç¾åœ¨ã®èª²é¡Œ</label>
                        <textarea id="kpi" rows="2" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 outline-none transition" placeholder="ä¾‹ï¼šæœˆé–“10ä»¶ã®å•ã„åˆã‚ã›ãŒæ¬²ã—ã„ã€‚ç¾çŠ¶ã¯é›»è©±å¯¾å¿œãŒå¤šãå¤§å¤‰ã€‚">${formData.purpose.kpi || ''}</textarea>
                    </div>
                    <input type="hidden" id="issues" value="">
                </div>
            `;
        }

        function renderStep3() {
            return `
                ${renderHeader("ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¨ç«¶åˆ", "èª°ã«è¦‹ã¦ã»ã—ãã¦ã€èª°ã¨æ¯”è¼ƒã•ã‚Œã¾ã™ã‹ï¼Ÿ")}
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-1">ç†æƒ³ã®ãŠå®¢æ§˜åƒ (ãƒšãƒ«ã‚½ãƒŠ)</label>
                        <textarea id="persona" rows="3" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 outline-none transition" placeholder="ä¾‹ï¼š30ä»£ã€œ40ä»£ã®å¥³æ€§ã€å­è‚²ã¦ä¸­ã§æ™‚çŸ­å®¶é›»ã‚’æ¢ã—ã¦ã„ã‚‹æ–¹">${formData.target.persona || ''}</textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">ç«¶åˆä»–ç¤¾ / æ¯”è¼ƒã•ã‚Œã‚‹ã‚µãƒ¼ãƒ“ã‚¹</label>
                        <textarea id="competitors" rows="3" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 outline-none transition" placeholder="ä¼šç¤¾åã‚„URLã€ãã®ç«¶åˆã®è‰¯ã„ç‚¹ãƒ»æ‚ªã„ç‚¹ãªã©">${formData.target.competitors || ''}</textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">å‚è€ƒã«ã—ãŸã„ã‚µã‚¤ãƒˆ (ã‚ã‚Œã°URL)</label>
                        <textarea id="reference" rows="2" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 outline-none transition">${formData.target.reference || ''}</textarea>
                    </div>
                </div>
            `;
        }

        function renderStep4() {
            const currentKeywords = formData.design.keywords || [];
            const keywords = ['ã‚·ãƒ³ãƒ—ãƒ«', 'æ¸…æ½”æ„Ÿ', 'ä¿¡é ¼æ„Ÿ', 'é«˜ç´šæ„Ÿ', 'è¦ªã—ã¿ã‚„ã™ã„', 'æœªæ¥çš„', 'ä¼çµ±çš„', 'ãƒãƒƒãƒ—', 'ãƒŠãƒãƒ¥ãƒ©ãƒ«', 'ãƒŸãƒ‹ãƒãƒ«'];
            
            return `
                ${renderHeader("ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ»ä¸–ç•Œè¦³", "ã©ã‚“ãªå°è±¡ã‚’æŒã£ã¦ã‚‚ã‚‰ã„ãŸã„ã§ã™ã‹ï¼Ÿ")}
                
                <div class="mb-6">
                    <label class="block text-sm font-medium mb-3">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</label>
                    <div class="flex flex-wrap gap-2">
                        ${keywords.map(kw => `
                            <label class="cursor-pointer">
                                <input type="checkbox" name="designKeyword" value="${kw}" class="peer sr-only" ${currentKeywords.includes(kw) ? 'checked' : ''}>
                                <span class="inline-block px-4 py-2 rounded-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm peer-checked:bg-primary-500 peer-checked:text-white peer-checked:border-primary-500 transition select-none">
                                    ${kw}
                                </span>
                            </label>
                        `).join('')}
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium mb-2">ãƒ¡ã‚¤ãƒ³ã‚«ãƒ©ãƒ¼</label>
                        <div class="flex items-center gap-4 p-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800">
                            <input type="color" id="mainColor" value="${formData.design.color}" class="w-10 h-10 rounded cursor-pointer border-0 p-0">
                            <div class="flex-1">
                                <div id="colorPreview" class="w-full h-4 rounded-full" style="background-color: ${formData.design.color}"></div>
                            </div>
                            <span id="colorCode" class="text-xs font-mono text-gray-500">${formData.design.color}</span>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">ãƒ–ãƒ©ãƒ³ãƒ‰ã‚«ãƒ©ãƒ¼ãŒã‚ã‚Œã°æŒ‡å®šã—ã¦ãã ã•ã„</p>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium mb-2">ãƒ•ã‚©ãƒ³ãƒˆãƒ»é›°å›²æ°—</label>
                         <input type="text" id="fontSpec" value="${formData.design.font || ''}" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 outline-none" placeholder="æ˜æœä½“ã€ã‚´ã‚·ãƒƒã‚¯ä½“ã€æ‰‹æ›¸ãé¢¨ãªã©">
                    </div>
                </div>
            `;
        }

        function renderStep5() {
            const currentFeatures = formData.specs.features || [];
            const features = ['ãŠçŸ¥ã‚‰ã›æ©Ÿèƒ½', 'ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ', 'SNSåŸ‹ã‚è¾¼ã¿', 'GoogleMap', 'äºˆç´„ã‚·ã‚¹ãƒ†ãƒ ', 'ä¼šå“¡ãƒ­ã‚°ã‚¤ãƒ³', 'ECãƒ»æ±ºæ¸ˆæ©Ÿèƒ½', 'æ¤œç´¢æ©Ÿèƒ½'];
            
            return `
                ${renderHeader("æ©Ÿèƒ½ãƒ»ä»•æ§˜", "ã‚µã‚¤ãƒˆã«å¿…è¦ãªæ©Ÿèƒ½ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚")}
                
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium mb-3">å®Ÿè£…ã—ãŸã„æ©Ÿèƒ½</label>
                        <div class="grid grid-cols-2 gap-3">
                             ${features.map(ft => `
                                <label class="cursor-pointer">
                                    <input type="checkbox" name="features" value="${ft}" class="peer sr-only" ${currentFeatures.includes(ft) ? 'checked' : ''}>
                                    <div class="px-3 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm peer-checked:border-primary-500 peer-checked:bg-primary-50 dark:peer-checked:bg-primary-900/30 transition flex items-center">
                                        <i class="fa-solid fa-check text-primary-500 mr-2 opacity-0 peer-checked:opacity-100"></i>
                                        <span>${ft}</span>
                                    </div>
                                </label>
                            `).join('')}
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium mb-2">æ›´æ–°ã‚·ã‚¹ãƒ†ãƒ  (CMS)</label>
                        <select id="cms" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 outline-none">
                            <option value="WordPress" ${formData.specs.cms === 'WordPress' ? 'selected' : ''}>WordPressï¼ˆæ¨å¥¨ãƒ»ä¸€èˆ¬çš„ï¼‰</option>
                            <option value="Studio" ${formData.specs.cms === 'Studio' ? 'selected' : ''}>Studioï¼ˆãƒãƒ¼ã‚³ãƒ¼ãƒ‰ãƒ»ãƒ‡ã‚¶ã‚¤ãƒ³é‡è¦–ï¼‰</option>
                            <option value="Shopify" ${formData.specs.cms === 'Shopify' ? 'selected' : ''}>Shopifyï¼ˆECã‚µã‚¤ãƒˆå‘ã‘ï¼‰</option>
                            <option value="é™çš„HTML" ${formData.specs.cms === 'é™çš„HTML' ? 'selected' : ''}>æ›´æ–°æ©Ÿèƒ½ãªã—ï¼ˆé™çš„HTMLï¼‰</option>
                            <option value="ç›¸è«‡ã—ãŸã„" ${formData.specs.cms === 'ç›¸è«‡ã—ãŸã„' ? 'selected' : ''}>ã‚ã‹ã‚‰ãªã„ã®ã§ç›¸è«‡ã—ãŸã„</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium mb-2">ãã®ä»–ã“ã ã‚ã‚Š</label>
                         <textarea id="otherFeatures" rows="2" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 outline-none" placeholder="ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¤šç”¨ã—ãŸã„ã€ãªã©">${formData.specs.other || ''}</textarea>
                    </div>
                </div>
            `;
        }

        function renderStep6() {
            return `
                 ${renderHeader("SEOãƒ»é›†å®¢", "ã©ã‚“ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢ã•ã‚ŒãŸã„ã§ã™ã‹ï¼Ÿ")}
                 <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-1">ç‹™ã„ãŸã„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</label>
                        <input type="text" id="seoKeywords" value="${formData.seo.keywords || ''}" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 outline-none" placeholder="ä¾‹ï¼šåœ°åŸŸå + æ¥­ç¨®ã€ã‚µãƒ¼ãƒ“ã‚¹åãªã©">
                        <p class="text-xs text-gray-500 mt-1">Googleæ¤œç´¢ã§ä¸Šä½ã«è¡¨ç¤ºã•ã›ãŸã„è¨€è‘‰ã§ã™ã€‚</p>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">ä½¿ã„ãŸããªã„è¡¨ç¾ãƒ»NGãƒ¯ãƒ¼ãƒ‰</label>
                        <input type="text" id="seoExclude" value="${formData.seo.exclude || ''}" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">è¨ˆæ¸¬ãƒ„ãƒ¼ãƒ«å°å…¥</label>
                        <select id="analytics" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 outline-none">
                            <option value="GA4å°å…¥å¸Œæœ›" ${formData.seo.tools === 'GA4å°å…¥å¸Œæœ›' ? 'selected' : ''}>Google Analytics (GA4) ã‚’å°å…¥ã—ãŸã„</option>
                            <option value="ç¾çŠ¶ç¶­æŒ" ${formData.seo.tools === 'ç¾çŠ¶ç¶­æŒ' ? 'selected' : ''}>ç¾åœ¨ã®ã‚¿ã‚°ã‚’å¼•ãç¶™ããŸã„</option>
                            <option value="ä¸è¦" ${formData.seo.tools === 'ä¸è¦' ? 'selected' : ''}>ç‰¹ã«ä¸è¦</option>
                        </select>
                    </div>
                 </div>
            `;
        }

        function renderStep7() {
            const createRadio = (name, label, currentVal) => `
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-2">${label}</label>
                    <div class="flex gap-4">
                        <label class="flex items-center cursor-pointer">
                            <input type="radio" name="${name}" value="ã‚ã‚Š" class="mr-2 text-primary-600 focus:ring-primary-500" ${currentVal === 'ã‚ã‚Š' ? 'checked' : ''}> ã‚ã‚Š
                        </label>
                        <label class="flex items-center cursor-pointer">
                            <input type="radio" name="${name}" value="ãªã—" class="mr-2 text-primary-600 focus:ring-primary-500" ${currentVal === 'ãªã—' ? 'checked' : ''}> ãªã—
                        </label>
                        <label class="flex items-center cursor-pointer">
                            <input type="radio" name="${name}" value="ä¾é ¼ã—ãŸã„" class="mr-2 text-primary-600 focus:ring-primary-500" ${currentVal === 'ä¾é ¼ã—ãŸã„' ? 'checked' : ''}> ä¾é ¼ã—ãŸã„
                        </label>
                    </div>
                </div>
            `;

            return `
                 ${renderHeader("ç´ æãƒ»åˆ¶ä½œæ¡ä»¶", "åŸç¨¿ã‚„å†™çœŸã¯æº–å‚™å¯èƒ½ã§ã™ã‹ï¼Ÿ")}
                 <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl border border-gray-200 dark:border-gray-700">
                    ${createRadio('assetLogo', 'ãƒ­ã‚´ãƒ‡ãƒ¼ã‚¿', formData.assets.logo)}
                    ${createRadio('assetPhoto', 'å†™çœŸç´ æ', formData.assets.photo)}
                    ${createRadio('assetText', 'åŸç¨¿ãƒ†ã‚­ã‚¹ãƒˆ', formData.assets.text)}
                    
                    <div class="mt-6 pt-4 border-t border-gray-200 dark:border-gray-700">
                        <label class="block text-sm font-medium mb-1">å…¬é–‹å¸Œæœ›æ™‚æœŸ</label>
                        <input type="text" id="deadline" value="${formData.assets.deadline || ''}" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 outline-none" placeholder="ä¾‹ï¼šã€‡ã€‡å¹´ã€‡æœˆé ƒã€ç‰¹ã«ãªã—">
                    </div>
                 </div>
            `;
        }

        function renderStep8() {
             return `
                 ${renderHeader("è£œè¶³ãƒ»æƒ³ã„", "æœ€å¾Œã«ã€ç‰¹ã«ä¼ãˆã¦ãŠããŸã„ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ")}
                 <div>
                    <textarea id="freeText" rows="6" class="w-full p-4 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-primary-500 outline-none transition text-base leading-relaxed" placeholder="åˆ¶ä½œã«å¯¾ã™ã‚‹æƒ³ã„ã€ä¸å®‰ãªç‚¹ã€ã“ã ã‚ã‚Šã®ãƒã‚¤ãƒ³ãƒˆãªã©ã€è‡ªç”±ã«ãŠæ›¸ããã ã•ã„ã€‚">${formData.extra || ''}</textarea>
                 </div>
            `;
        }

        function renderStep9() {
            // Conditional Rendering based on Site Type
            if (formData.siteType === 'lp') {
                return renderStep9LP();
            } else {
                return renderStep9Corp();
            }
        }

        function renderStep9LP() {
            return `
                ${renderHeader("æ§‹æˆæ¡ˆ (LPç”¨)", "1ãƒšãƒ¼ã‚¸ã§ä½•ã‚’ä¼ãˆã‚‹ã‹æ•´ç†ã—ã¾ã—ã‚‡ã†ã€‚")}
                <div class="space-y-4">
                     <div>
                        <label class="block text-sm font-medium mb-1 text-primary-600">â‘  ä¸€ç•ªä¼ãˆãŸã„å¼·ã¿ (USP)</label>
                        <textarea id="lpMessage" rows="2" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 outline-none" placeholder="ä»–ç¤¾ã«ã¯ãªã„ä¸€ç•ªã®å£²ã‚Šã¯ï¼Ÿ">${formData.structure.lpMessage || ''}</textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">â‘¡ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä¸å®‰ã«æ€ã†ã“ã¨</label>
                        <textarea id="lpAnxiety" rows="2" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 outline-none" placeholder="é«˜ã„ã®ã§ã¯ï¼ŸåŠ¹æœã¯ã‚ã‚‹ã®ï¼Ÿãªã©">${formData.structure.lpAnxiety || ''}</textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">â‘¢ ãã®ä¸å®‰ã¸ã®ç­”ãˆ (è§£æ±ºç­–)</label>
                        <textarea id="lpSolution" rows="2" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 outline-none" placeholder="å®Ÿç¸¾ã€‡ã€‡ä»¶ã€è¿”é‡‘ä¿è¨¼ã‚ã‚Šã€ãªã©">${formData.structure.lpSolution || ''}</textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1 text-accent-500 font-bold">â‘£ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ (CTA)</label>
                        <input type="text" id="lpCta" value="${formData.structure.lpCta || ''}" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 outline-none" placeholder="ãƒœã‚¿ãƒ³ã®æ–‡è¨€ï¼ˆä¾‹ï¼šç„¡æ–™ã§ç›¸è«‡ã™ã‚‹ï¼‰">
                    </div>
                </div>
            `;
        }

        function renderStep9Corp() {
             const pages = ['ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸', 'ã‚µãƒ¼ãƒ“ã‚¹ãƒ»äº‹æ¥­ç´¹ä»‹', 'æ–™é‡‘ãƒ—ãƒ©ãƒ³', 'ä¼šç¤¾æ¦‚è¦', 'å®Ÿç¸¾ç´¹ä»‹', 'ãŠå®¢æ§˜ã®å£°', 'ã‚ˆãã‚ã‚‹è³ªå•', 'ãŠçŸ¥ã‚‰ã›ä¸€è¦§', 'ãŠå•ã„åˆã‚ã›', 'ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼', 'æ¡ç”¨æƒ…å ±'];
             const currentPages = formData.structure.pages || [];

             return `
                ${renderHeader("ãƒšãƒ¼ã‚¸æ§‹æˆ (ã‚µã‚¤ãƒˆãƒãƒƒãƒ—)", "å¿…è¦ãªãƒšãƒ¼ã‚¸ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚")}
                
                <div class="mb-6">
                    <label class="block text-sm font-medium mb-3">ä½œæˆãƒšãƒ¼ã‚¸</label>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-2">
                        ${pages.map(pg => `
                            <label class="cursor-pointer">
                                <input type="checkbox" name="pages" value="${pg}" class="peer sr-only" ${currentPages.includes(pg) ? 'checked' : ''}>
                                <div class="px-3 py-2 rounded bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-sm peer-checked:bg-primary-50 dark:peer-checked:bg-primary-900/20 peer-checked:border-primary-500 peer-checked:text-primary-700 dark:peer-checked:text-primary-300 transition">
                                    ${pg}
                                </div>
                            </label>
                        `).join('')}
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-1">ä¸€ç•ªè¦‹ã¦ã»ã—ã„ãƒšãƒ¼ã‚¸</label>
                    <input type="text" id="priorityPage" value="${formData.structure.priorityPage || ''}" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 outline-none" placeholder="ä¾‹ï¼šã‚µãƒ¼ãƒ“ã‚¹ç´¹ä»‹ã€ã¾ãŸã¯å®Ÿç¸¾ç´¹ä»‹">
                </div>
            `;
        }

        function renderSummary() {
            const summaryText = generatePromptText();
            return `
                <div class="text-center mb-8">
                    <div class="inline-block p-4 rounded-full bg-green-100 text-green-600 mb-4">
                        <i class="fa-solid fa-check text-3xl"></i>
                    </div>
                    <h2 class="text-2xl font-bold">ãƒ’ãƒ¤ãƒªãƒ³ã‚°å®Œäº†ã§ã™ï¼</h2>
                    <p class="text-gray-500 mt-2">ä»¥ä¸‹ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€åˆ¶ä½œä¼šç¤¾ã¸ã®ä¾é ¼ã‚„<br>AIãƒ„ãƒ¼ãƒ«(ChatGPTç­‰)ã¸ã®æŒ‡ç¤ºã¨ã—ã¦ãŠä½¿ã„ãã ã•ã„ã€‚</p>
                </div>

                <div class="relative group mb-6">
                    <pre id="resultText" class="bg-gray-100 dark:bg-gray-800 p-6 rounded-xl text-sm font-mono whitespace-pre-wrap text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-700 max-h-[40vh] overflow-y-auto">${summaryText}</pre>
                    
                    <button onclick="copyToClipboard()" class="absolute top-4 right-4 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 shadow-sm px-4 py-2 rounded-lg text-sm font-bold hover:bg-gray-50 dark:hover:bg-gray-600 transition flex items-center gap-2">
                        <i class="fa-regular fa-copy"></i> è¦ä»¶å®šç¾©æ›¸ã‚’ã‚³ãƒ”ãƒ¼
                    </button>
                </div>

                <!-- AI Code Generation Button -->
                <div class="bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 p-1 rounded-2xl shadow-lg">
                    <div class="bg-white dark:bg-gray-900 rounded-xl p-6 text-center">
                        <h3 class="font-bold text-lg mb-2 bg-clip-text text-transparent bg-gradient-to-r from-indigo-500 to-pink-500">
                            <i class="fa-solid fa-wand-magic-sparkles mr-2"></i>ã“ã®å†…å®¹ã§ã‚µã‚¤ãƒˆã‚’ä½œã‚Šã¾ã™ã‹ï¼Ÿ
                        </h3>
                        <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
                            AIã¸ã®ã€Œé–‹ç™ºæŒ‡ç¤ºæ›¸(ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ)ã€ã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™ã€‚<br>
                            ã‚³ãƒ”ãƒ¼ã—ã¦ChatGPTç­‰ã«è²¼ã‚Šä»˜ã‘ã‚‹ã ã‘ã§ã€ã‚³ãƒ¼ãƒ‰ãŒå®Œæˆã—ã¾ã™ã€‚
                        </p>
                        <button onclick="copyAiPrompt()" class="w-full py-3 rounded-xl bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-bold hover:opacity-90 transition transform active:scale-95 flex items-center justify-center gap-2">
                            <span>ğŸš€ AIé–‹ç™ºç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ã‚³ãƒ”ãƒ¼</span>
                        </button>
                    </div>
                </div>

                <div class="mt-8 flex justify-center">
                    <p class="text-xs text-gray-400">â€» ã“ã®å†…å®¹ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã«ä¸€æ™‚ä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>
                </div>
            `;
        }

        // --- Summary Text Generator (The Core Output) ---
        function generatePromptText() {
            const typeLabel = formData.siteType === 'lp' ? 'ã‚·ãƒ³ã‚°ãƒ«ãƒšãƒ¼ã‚¸ï¼ˆLPï¼‰' : 'ã‚³ãƒ¼ãƒãƒ¬ãƒ¼ãƒˆã‚µã‚¤ãƒˆï¼ˆè¤‡æ•°ãƒšãƒ¼ã‚¸ï¼‰';
            const structureSection = formData.siteType === 'lp' 
                ? `â–  ãƒšãƒ¼ã‚¸æ§‹æˆ (LPæ§‹æˆæ¡ˆ)
ãƒ»USP (å¼·ã¿): ${formData.structure.lpMessage}
ãƒ»é¡§å®¢ã®ä¸å®‰: ${formData.structure.lpAnxiety}
ãƒ»è§£æ±ºç­–: ${formData.structure.lpSolution}
ãƒ»CTA (è¡Œå‹•): ${formData.structure.lpCta}`
                : `â–  ãƒšãƒ¼ã‚¸æ§‹æˆ (ã‚µã‚¤ãƒˆãƒãƒƒãƒ—)
ãƒ»å¿…è¦ãƒšãƒ¼ã‚¸: ${formData.structure.pages ? formData.structure.pages.join(', ') : 'æœªå®š'}
ãƒ»æœ€å„ªå…ˆãƒšãƒ¼ã‚¸: ${formData.structure.priorityPage}`;

            // Add Interviewer Info
            const interviewerInfo = (formData.interviewer?.company || formData.interviewer?.name) 
                ? `åˆ¶ä½œæ‹…å½“: ${formData.interviewer.company} ${formData.interviewer.name}\n` 
                : '';

            return `
# Webã‚µã‚¤ãƒˆåˆ¶ä½œè¦ä»¶å®šç¾©æ›¸
${interviewerInfo}
## 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
ãƒ»ã‚µã‚¤ãƒˆã‚¿ã‚¤ãƒ—: ${typeLabel}
ãƒ»ä¼šç¤¾å: ${formData.basicInfo.name}
ãƒ»ç¾åœ¨ã®çŠ¶æ³: ${formData.basicInfo.status}
ãƒ»ã‚µã‚¤ãƒˆå: ${formData.basicInfo.siteName || 'æœªå®š'}
ãƒ»å…¬é–‹å¸Œæœ›: ${formData.assets.deadline}

## 2. ç›®çš„ã¨ã‚´ãƒ¼ãƒ«
ãƒ»åˆ¶ä½œç›®çš„: ${formData.purpose.objective}
ãƒ»äº‹æ¥­æ¦‚è¦: ${formData.purpose.business}
ãƒ»æœ€çµ‚ã‚´ãƒ¼ãƒ«(CV): ${formData.purpose.goal}
ãƒ»KPI/èª²é¡Œ: ${formData.purpose.kpi}

## 3. ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ»ç«¶åˆ
ãƒ»ãƒšãƒ«ã‚½ãƒŠ: ${formData.target.persona}
ãƒ»ç«¶åˆæƒ…å ±: ${formData.target.competitors}
ãƒ»å‚è€ƒã‚µã‚¤ãƒˆ: ${formData.target.reference}

## 4. ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ»æ©Ÿèƒ½è¦ä»¶
ãƒ»ãƒ‡ã‚¶ã‚¤ãƒ³ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: ${formData.design.keywords ? formData.design.keywords.join(' / ') : ''}
ãƒ»ãƒ¡ã‚¤ãƒ³ã‚«ãƒ©ãƒ¼: ${formData.design.color}
ãƒ»ãƒ•ã‚©ãƒ³ãƒˆå¸Œæœ›: ${formData.design.font}
ãƒ»ãƒ‡ãƒã‚¤ã‚¹: ${formData.specs.devices}
ãƒ»CMS: ${formData.specs.cms}
ãƒ»å¿…è¦æ©Ÿèƒ½: ${formData.specs.features ? formData.specs.features.join(', ') : ''}
ãƒ»ãã®ä»–æ©Ÿèƒ½: ${formData.specs.other}

## 5. SEOãƒ»é›†å®¢ãƒ»ç´ æ
ãƒ»å¯¾ç­–ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: ${formData.seo.keywords}
ãƒ»NGãƒ¯ãƒ¼ãƒ‰: ${formData.seo.exclude}
ãƒ»è¨ˆæ¸¬ãƒ„ãƒ¼ãƒ«: ${formData.seo.tools}
ãƒ»ç´ æçŠ¶æ³ (ãƒ­ã‚´): ${formData.assets.logo}
ãƒ»ç´ æçŠ¶æ³ (å†™çœŸ): ${formData.assets.photo}
ãƒ»ç´ æçŠ¶æ³ (åŸç¨¿): ${formData.assets.text}

${structureSection}

## 6. è£œè¶³ãƒ»æƒ³ã„
${formData.extra}
            `.trim();
        }

        // --- New: Generate AI Development Prompt ---
        function generateAiDevelopmentPrompt() {
            return `
ã‚ãªãŸã¯ç†Ÿç·´ã®ã‚·ãƒ‹ã‚¢ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å…¼UIãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ã§ã™ã€‚
ä»¥ä¸‹ã®ã€ŒWebã‚µã‚¤ãƒˆåˆ¶ä½œè¦ä»¶å®šç¾©æ›¸ã€ã«åŸºã¥ãã€ãƒ¢ãƒ€ãƒ³ã§ç¾ã—ãã€ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç‡ã®é«˜ã„Webã‚µã‚¤ãƒˆã®ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

ã€å‡ºåŠ›è¦ä»¶ã€‘
1. **1ã¤ã®HTMLãƒ•ã‚¡ã‚¤ãƒ«**ï¼ˆindex.htmlï¼‰ã¨ã—ã¦å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚
2. **Tailwind CSS (CDN)** ã‚’ä½¿ç”¨ã—ã€ãƒ‡ã‚¶ã‚¤ãƒ³è¦ä»¶ï¼ˆãƒ¡ã‚¤ãƒ³ã‚«ãƒ©ãƒ¼: ${formData.design.color}ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: ${formData.design.keywords ? formData.design.keywords.join('/') : ''}ï¼‰ã‚’åæ˜ ã—ãŸç¾ã—ã„UIã«ã—ã¦ãã ã•ã„ã€‚
3. **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ**ã‚’å®Œç’§ã«è¡Œã„ã€ã‚¹ãƒãƒ›ãƒ»ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ»PCã™ã¹ã¦ã§è¦‹ã‚„ã™ãã—ã¦ãã ã•ã„ã€‚
4. ç”»åƒã¯ãƒ€ãƒŸãƒ¼ç”»åƒã‚µãƒ¼ãƒ“ã‚¹ï¼ˆhttps://placehold.co/600x400 ãªã©ï¼‰ã‚’ä½¿ç”¨ã—ã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒå´©ã‚Œãªã„ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚
5. **JavaScript** ã¯å¿…è¦æœ€å°é™ï¼ˆãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®é–‹é–‰ãªã©ï¼‰ã«ã—ã€HTMLå†…ã«å«ã‚ã¦ãã ã•ã„ã€‚
6. FontAwesome (CDN) ã‚’ä½¿ç”¨ã—ã¦é©åˆ‡ãªã‚¢ã‚¤ã‚³ãƒ³ã‚’é…ç½®ã—ã¦ãã ã•ã„ã€‚
7. æ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆã¯ "Noto Sans JP" ã‚’Google Fontsã‹ã‚‰èª­ã¿è¾¼ã‚“ã§é©ç”¨ã—ã¦ãã ã•ã„ã€‚

ã€Webã‚µã‚¤ãƒˆåˆ¶ä½œè¦ä»¶å®šç¾©æ›¸ã€‘
${generatePromptText()}

ã€ã‚³ãƒ¼ãƒ‰ä½œæˆã®ãŠé¡˜ã„ã€‘
ä¸Šè¨˜ã®è¦ä»¶ã‚’æº€ãŸã™ã€å³åº§ã«ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèªå¯èƒ½ãªå®Œæˆã•ã‚ŒãŸHTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã”ã¨ã«åˆ†ã‹ã‚Šã‚„ã™ã„ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚
`;
        }

        function copyToClipboard() {
            const text = document.getElementById('resultText').innerText;
            handleCopy(text);
        }

        function copyAiPrompt() {
            const prompt = generateAiDevelopmentPrompt();
            handleCopy(prompt);
        }

        function handleCopy(text) {
            // Try modern API first
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text).then(() => {
                    showToast("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼");
                }).catch(err => {
                    console.warn('Clipboard API failed, trying fallback', err);
                    fallbackCopyTextToClipboard(text);
                });
            } else {
                fallbackCopyTextToClipboard(text);
            }
        }

        function fallbackCopyTextToClipboard(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            
            // Avoid scrolling to bottom
            textArea.style.top = "0";
            textArea.style.left = "0";
            textArea.style.position = "fixed";

            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();

            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showToast("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼");
                } else {
                    console.error('Fallback: Copying text command was unsuccessful');
                    alert('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ‰‹å‹•ã§ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚');
                }
            } catch (err) {
                console.error('Fallback: Oops, unable to copy', err);
                alert('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ‰‹å‹•ã§ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚');
            }

            document.body.removeChild(textArea);
        }

    </script>
</body>
</html>